/**
 * Swiss Cottages Chatbot Widget Styles
 * Redesigned to match UX Pilot design
 */

 @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

 :root {
     --chatbot-primary-color: #000000;
     --chatbot-bg-color: #ffffff;
     --chatbot-text-color: #2d333a;
     --chatbot-border-color: #e5e5e5;
     --chatbot-border-color-light: #d1d5db;
     --chatbot-gray-bg: #f7f7f8;
     --chatbot-gray-hover: #e5e5e5;
     --chatbot-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
     --chatbot-radius: 12px;
     --chatbot-radius-xl: 12px;
 }
 
 .chatbot-widget {
     position: fixed;
     z-index: 9999999 !important; /* Very high z-index to appear above WordPress headers */
     font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
     /* Prevent WordPress theme interference */
     box-sizing: border-box;
     -webkit-font-smoothing: antialiased;
     -moz-osx-font-smoothing: grayscale;
     /* Prevent blur effects during image loading */
     filter: none !important;
     backdrop-filter: none !important;
     -webkit-backdrop-filter: none !important;
 }
 
 /* Prevent body scroll and hide site when chat is open on mobile */
 body.chatbot-open-mobile {
     overflow: hidden !important;
     position: fixed !important;
     width: 100% !important;
     height: 100% !important;
 }
 
 /* Hide entire site content when chat is open on mobile - show only chat */
 body.chatbot-open-mobile > *:not(#chatbot-widget) {
     display: none !important;
     visibility: hidden !important;
     opacity: 0 !important;
 }
 
 /* Hide main content areas */
 body.chatbot-open-mobile #main,
 body.chatbot-open-mobile .site-content,
 body.chatbot-open-mobile .content-area,
 body.chatbot-open-mobile main,
 body.chatbot-open-mobile header:not(.chatbot-header),
 body.chatbot-open-mobile footer,
 body.chatbot-open-mobile nav,
 body.chatbot-open-mobile .navbar,
 body.chatbot-open-mobile .navigation,
 body.chatbot-open-mobile .site-header,
 body.chatbot-open-mobile .main-header,
 body.chatbot-open-mobile #masthead,
 body.chatbot-open-mobile .wrapper,
 body.chatbot-open-mobile .container,
 body.chatbot-open-mobile .page-wrapper {
     display: none !important;
     visibility: hidden !important;
     opacity: 0 !important;
 }
 
 /* Hide WordPress admin bar when chat is open on mobile */
 body.chatbot-open-mobile #wpadminbar {
     display: none !important;
     visibility: hidden !important;
 }
 
 /* Ensure body and html don't show background when chat is open */
 html.chatbot-open-mobile,
 body.chatbot-open-mobile {
     background-color: var(--chatbot-bg-color) !important;
     overflow: hidden !important;
 }
 
 /* Make sure widget covers everything */
 body.chatbot-open-mobile #chatbot-widget {
     position: fixed !important;
     top: 0 !important;
     left: 0 !important;
     right: 0 !important;
     bottom: 0 !important;
     width: 100vw !important;
     height: 100vh !important;
     z-index: 99999999 !important;
     background-color: var(--chatbot-bg-color) !important;
 }
 
 /* WordPress-specific overrides to ensure widget appears above headers */
 #wpadminbar ~ #chatbot-widget,
 .admin-bar #chatbot-widget,
 #chatbot-widget {
     z-index: 9999999 !important;
 }
 
 /* Ensure widget appears above WordPress sticky headers */
 header[class*="sticky"],
 .header-sticky,
 .site-header,
 .main-header,
 #masthead,
 .navbar,
 .navigation {
     z-index: 9999 !important; /* Lower than widget */
 }
 
 /* Override any WordPress theme z-index */
 body #chatbot-widget,
 html #chatbot-widget {
     z-index: 9999999 !important;
 }
 
 /* Position variants */
 .chatbot-bottom-right {
     bottom: 20px;
     right: 20px;
 }
 
 .chatbot-bottom-left {
     bottom: 20px;
     left: 20px;
 }
 
 /* Toggle Button */
 .chatbot-toggle {
     width: 60px;
     height: 60px;
     border-radius: 50%;
     background-color: var(--chatbot-primary-color);
     color: white;
     border: none;
     cursor: pointer;
     box-shadow: var(--chatbot-shadow);
     display: flex;
     align-items: center;
     justify-content: center;
     transition: transform 0.2s, box-shadow 0.2s;
     z-index: 9999999 !important; /* Above WordPress headers */
     position: relative;
 }
 
 .chatbot-toggle:hover {
     transform: scale(1.1);
     box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
 }
 
 .chatbot-toggle:active {
     transform: scale(0.95);
 }
 
 /* Chat Window */
 .chatbot-window {
     position: absolute;
     bottom: 80px;
     width: 380px;
     height: 600px;
     max-height: 80vh;
     background-color: var(--chatbot-bg-color);
     border-radius: var(--chatbot-radius);
     box-shadow: var(--chatbot-shadow);
     display: none; /* Hidden by default */
     flex-direction: column;
     overflow: hidden;
     transition: all 0.3s ease;
     z-index: 9999999 !important; /* Above WordPress headers */
     /* Prevent blur effects during image loading */
     filter: none !important;
     backdrop-filter: none !important;
     -webkit-backdrop-filter: none !important;
 }
 
 /* When window is shown */
 .chatbot-window[style*="flex"],
 .chatbot-window.chatbot-open {
     display: flex !important;
 }
 
 /* Ensure header is always visible when window is open */
 .chatbot-window[style*="flex"] .chatbot-header,
 .chatbot-window.chatbot-open .chatbot-header {
     display: flex !important;
     visibility: visible !important;
     opacity: 1 !important;
 }
 
 /* Backdrop overlay for fullscreen mode */
 .chatbot-widget::before {
     content: '';
     position: fixed;
     top: 0;
     left: 0;
     right: 0;
     bottom: 0;
     background-color: rgba(0, 0, 0, 0.5);
     z-index: 9999998 !important; /* Just below window, above everything else */
     display: none;
     pointer-events: auto;
     cursor: pointer;
 }
 
 .chatbot-widget.chatbot-fullscreen-active::before {
     display: block;
 }
 
 /* Prevent window from closing when clicking inside it */
 .chatbot-window.chatbot-fullscreen {
     pointer-events: auto;
 }
 
 .chatbot-widget.chatbot-fullscreen-active {
     pointer-events: auto;
 }
 
 .chatbot-window.chatbot-fullscreen {
     position: fixed !important;
     top: 50% !important;
     left: 50% !important;
     transform: translate(-50%, -50%) !important;
     width: 90vw !important;
     max-width: 1400px !important;
     min-width: 800px !important;
     height: 85vh !important;
     max-height: 85vh !important;
     border-radius: 12px !important;
     z-index: 9999999 !important; /* Above WordPress headers and admin bar */
     display: flex !important;
     flex-direction: column !important;
     box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3) !important;
     margin: 0 !important;
     overflow: hidden !important;
 }
 
 /* Ensure header is visible in fullscreen mode on desktop - STRONG OVERRIDES */
 .chatbot-window.chatbot-fullscreen .chatbot-header {
     display: flex !important;
     visibility: visible !important;
     opacity: 1 !important;
     flex-shrink: 0 !important;
     width: 100% !important;
     padding: 16px 24px !important;
     border-radius: 12px 12px 0 0 !important;
     position: relative !important;
     z-index: 10 !important;
     background-color: var(--chatbot-bg-color) !important;
     color: var(--chatbot-text-color) !important;
     border-bottom: 1px solid var(--chatbot-border-color) !important;
     box-sizing: border-box !important;
 }
 
 .chatbot-window.chatbot-fullscreen .chatbot-header * {
     visibility: visible !important;
     opacity: 1 !important;
 }
 
 .chatbot-window.chatbot-fullscreen .chatbot-header-title {
     display: block !important;
     visibility: visible !important;
     opacity: 1 !important;
     font-size: 20px !important;
     margin: 0 !important;
     color: var(--chatbot-text-color) !important;
     font-weight: 600 !important;
 }
 
 .chatbot-window.chatbot-fullscreen .chatbot-header-actions {
     display: flex !important;
     visibility: visible !important;
     opacity: 1 !important;
     flex-shrink: 0 !important;
     gap: 8px !important;
     align-items: center !important;
 }
 
 .chatbot-window.chatbot-fullscreen .chatbot-icon-btn {
     display: flex !important;
     visibility: visible !important;
     opacity: 1 !important;
     width: 32px !important;
     height: 32px !important;
     color: var(--chatbot-text-color) !important;
     background: transparent !important;
 }
 
 .chatbot-window.chatbot-fullscreen .chatbot-icon-btn svg {
     display: block !important;
     visibility: visible !important;
     opacity: 1 !important;
     color: var(--chatbot-text-color) !important;
 }
 
 .chatbot-window.chatbot-fullscreen .chatbot-close {
     display: flex !important;
     visibility: visible !important;
     opacity: 1 !important;
     color: var(--chatbot-text-color) !important;
 }
 
 .chatbot-window.chatbot-fullscreen .chatbot-messages {
     flex: 1 !important;
     display: flex !important;
     flex-direction: column !important;
     overflow-y: auto !important;
     min-height: 0 !important;
 }
 
 .chatbot-window.chatbot-fullscreen .chatbot-input-container {
     display: block !important;
     visibility: visible !important;
     opacity: 1 !important;
     flex-shrink: 0 !important;
     width: 100% !important;
     padding: 24px !important;
     background-color: var(--chatbot-bg-color) !important;
     border-top: 1px solid var(--chatbot-border-color) !important;
     position: relative !important;
     z-index: 10 !important;
 }
 
 .chatbot-window.chatbot-fullscreen .chatbot-input-wrapper {
     display: block !important;
     visibility: visible !important;
     opacity: 1 !important;
     position: relative !important;
     max-width: 100% !important;
     width: 100% !important;
 }
 
 .chatbot-window.chatbot-fullscreen .chatbot-input {
     display: block !important;
     visibility: visible !important;
     opacity: 1 !important;
     width: 100% !important;
    padding: 16px 48px 16px 52px !important;  
       font-size: 14px !important;
     min-height: 50px !important;
     max-height: 200px !important;
 }
 
 .chatbot-window.chatbot-fullscreen .chatbot-send {
     display: flex !important;
     visibility: visible !important;
     opacity: 1 !important;
     position: absolute !important;
     right: 12px !important;
     bottom: 12px !important;
     width: 32px !important;
     height: 32px !important;
     z-index: 2 !important;
 }
 
 .chatbot-window.chatbot-fullscreen .chatbot-disclaimer {
     display: block !important;
     visibility: visible !important;
     opacity: 1 !important;
     margin-top: 8px !important;
     text-align: center !important;
 }
 
 .chatbot-bottom-left .chatbot-window {
     left: 0;
 }
 
 .chatbot-bottom-right .chatbot-window {
     right: 0;
 }
 
 /* Header */
 .chatbot-header {
     background-color: var(--chatbot-bg-color);
     color: var(--chatbot-text-color);
     padding: 16px 24px;
     display: flex !important;
     visibility: visible !important;
     opacity: 1 !important;
     justify-content: space-between;
     align-items: center;
     border-bottom: 1px solid var(--chatbot-border-color);
     position: relative;
     flex-shrink: 0;
     z-index: 10;
 }
 
 .chatbot-header-left {
     display: flex;
     align-items: center;
     gap: 12px;
 }
 
 .chatbot-logo {
     width: 32px;
     height: 32px;
     background-color: var(--chatbot-primary-color);
     border-radius: 4px;
     display: flex;
     align-items: center;
     justify-content: center;
     color: white;
     flex-shrink: 0;
 }
 
 .chatbot-logo svg {
     width: 20px;
     height: 20px;
 }
 
 .chatbot-header-title {
     margin: 0;
     font-size: 20px;
     font-weight: 600;
     color: var(--chatbot-text-color);
 }
 
 .chatbot-header-actions {
     display: flex;
     align-items: center;
     gap: 8px;
 }
 
 .chatbot-icon-btn {
     background: none;
     border: none;
     color: var(--chatbot-text-color);
     font-size: 20px;
     line-height: 1;
     cursor: pointer;
     padding: 4px 8px;
     width: 32px;
     height: 32px;
     display: flex;
     align-items: center;
     justify-content: center;
     border-radius: 4px;
     transition: background-color 0.2s;
 }
 
 .chatbot-icon-btn:hover {
     background-color: var(--chatbot-gray-bg);
 }
 
 .chatbot-icon-btn svg {
     width: 16px;
     height: 16px;
     color: var(--chatbot-text-color);
 }
 
 .chatbot-menu-dropdown {
     position: absolute;
     top: 100%;
     right: 10px;
     background-color: white;
     border-radius: 8px;
     box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
     padding: 4px;
     min-width: 180px;
     z-index: 1000;
     margin-top: 4px;
 }
 
 .chatbot-menu-item {
     width: 100%;
     background: none;
     border: none;
     padding: 10px 12px;
     text-align: left;
     cursor: pointer;
     display: flex;
     align-items: center;
     gap: 10px;
     color: #333;
     font-size: 0.9em;
     border-radius: 4px;
     transition: background-color 0.2s;
 }
 
 .chatbot-menu-item:hover {
     background-color: #f5f5f5;
 }
 
 .chatbot-menu-item svg {
     flex-shrink: 0;
     color: #666;
 }
 
 .chatbot-menu-item span {
     flex-grow: 1;
 }
 
 .chatbot-close {
     background: none;
     border: none;
     color: var(--chatbot-text-color);
     font-size: 24px;
     line-height: 1;
     cursor: pointer;
     padding: 0;
     width: 32px;
     height: 32px;
     display: flex;
     align-items: center;
     justify-content: center;
     border-radius: 4px;
     transition: background-color 0.2s;
 }
 
 .chatbot-close:hover {
     background-color: var(--chatbot-gray-bg);
 }
 
 /* Messages Container */
 .chatbot-messages {
     flex: 1;
     overflow-y: auto;
     overflow-x: visible; /* Allow image galleries to extend beyond */
     padding: 24px;
     display: flex;
     flex-direction: column;
     gap: 16px;
     position: relative;
     min-height: 0;
     z-index: 1;
 }
 
 .chatbot-messages::-webkit-scrollbar {
     width: 6px;
 }
 
 .chatbot-messages::-webkit-scrollbar-track {
     background: #f1f1f1;
 }
 
 .chatbot-messages::-webkit-scrollbar-thumb {
     background: #888;
     border-radius: 3px;
 }
 
 .chatbot-messages::-webkit-scrollbar-thumb:hover {
     background: #555;
 }
 
 /* Message Bubbles */
 .chatbot-message {
     display: flex;
     flex-direction: column;
     max-width: 80%;
     animation: fadeIn 0.3s ease-in;
 }
 
 @keyframes fadeIn {
     from {
         opacity: 0;
         transform: translateY(10px);
     }
     to {
         opacity: 1;
         transform: translateY(0);
     }
 }
 
 .chatbot-message-user {
     align-self: flex-end;
 }
 
 .chatbot-message-assistant {
     align-self: flex-start;
 }
 
 .chatbot-message-content {
     padding: 12px 16px;
     border-radius: 18px;
     line-height: 1.5;
     word-wrap: break-word;
     /* Allow image gallery to overflow for proper scrolling */
     overflow: visible;
 }
 
 /* Ensure message container doesn't clip image gallery */
 .chatbot-message {
     overflow: visible;
 }
 
 .chatbot-message-user .chatbot-message-content {
     background-color: var(--chatbot-primary-color);
     color: white;
     border-bottom-right-radius: 4px;
 }
 
 .chatbot-message-assistant .chatbot-message-content {
     background-color: var(--chatbot-gray-bg);
     color: var(--chatbot-text-color);
     border-bottom-left-radius: 4px;
 }
 
 .chatbot-loading .chatbot-message-content {
     background-color: var(--chatbot-gray-bg);
     color: #6b7280;
     font-style: italic;
 }
 
 /* Searching indicator with blinking animation */
 .chatbot-searching {
     align-self: flex-start;
     animation: fadeIn 0.3s ease-in;
 }
 
 .chatbot-searching .chatbot-message-content {
     display: flex;
     align-items: center;
     gap: 8px;
     background-color: var(--chatbot-gray-bg);
     color: var(--chatbot-text-color);
     padding: 12px 16px;
     border-radius: 18px;
     border-bottom-left-radius: 4px;
 }
 
 .chatbot-searching-text {
     color: #6b7280;
     font-style: italic;
 }
 
 .chatbot-searching-dots {
     display: inline-flex;
     gap: 4px;
     align-items: center;
 }
 
 .chatbot-searching-dots .dot {
     width: 6px;
     height: 6px;
     border-radius: 50%;
     background-color: #6b7280;
     animation: blink 1.4s infinite;
 }
 
 .chatbot-searching-dots .dot:nth-child(1) {
     animation-delay: 0s;
 }
 
 .chatbot-searching-dots .dot:nth-child(2) {
     animation-delay: 0.2s;
 }
 
 .chatbot-searching-dots .dot:nth-child(3) {
     animation-delay: 0.4s;
 }
 
 @keyframes blink {
     0%, 80%, 100% {
         opacity: 0.3;
         transform: scale(0.8);
     }
     40% {
         opacity: 1;
         transform: scale(1);
     }
 }
 
 /* Typing indicator */
 .chatbot-typing-indicator {
     margin-bottom: 8px;
     padding: 8px 16px;
     display: flex;
     align-items: center;
 }
 
 .typing-dots {
     display: inline-flex;
     gap: 4px;
     align-items: center;
 }
 
 .typing-dots span {
     width: 8px;
     height: 8px;
     border-radius: 50%;
     background-color: #6b7280;
     animation: typing-bounce 1.4s infinite;
 }
 
 .typing-dots span:nth-child(1) {
     animation-delay: 0s;
 }
 
 .typing-dots span:nth-child(2) {
     animation-delay: 0.2s;
 }
 
 .typing-dots span:nth-child(3) {
     animation-delay: 0.4s;
 }
 
 @keyframes typing-bounce {
     0%, 60%, 100% {
         transform: translateY(0);
         opacity: 0.7;
     }
     30% {
         transform: translateY(-10px);
         opacity: 1;
     }
 }
 
 /* Streaming cursor */
 .chatbot-cursor {
     display: inline-block;
     width: 2px;
     height: 1.2em;
     background-color: var(--chatbot-text-color);
     margin-left: 2px;
     animation: blink-cursor 1s infinite;
     vertical-align: baseline;
 }
 
 @keyframes blink-cursor {
     0%, 50% {
         opacity: 1;
     }
     51%, 100% {
         opacity: 0;
     }
 }
 
 /* Progress bar */
 .chatbot-progress-bar {
     width: 100%;
     height: 3px;
     background-color: var(--chatbot-gray-bg);
     border-radius: 2px;
     overflow: hidden;
     margin-bottom: 8px;
 }
 
 .chatbot-progress-fill {
     height: 100%;
     background: linear-gradient(90deg, var(--chatbot-primary-color), #4a90e2);
     border-radius: 2px;
     transition: width 0.3s ease;
     animation: progress-shimmer 2s infinite;
 }
 
 @keyframes progress-shimmer {
     0% {
         background-position: -200% 0;
     }
     100% {
         background-position: 200% 0;
     }
 }
 
 /* Hide sources initially when streaming */
 .chatbot-streaming .chatbot-sources {
     display: none;
 }
 
 .chatbot-streaming .chatbot-sources.show {
     display: block;
 }
 
 /* Retry button */
 .chatbot-retry-btn {
     margin-top: 12px;
     padding: 8px 16px;
     background-color: var(--chatbot-primary-color);
     color: white;
     border: none;
     border-radius: 8px;
     cursor: pointer;
     font-size: 14px;
     font-weight: 500;
     display: inline-flex;
     align-items: center;
     gap: 6px;
     transition: background-color 0.2s, transform 0.2s;
 }
 
 .chatbot-retry-btn:hover {
     background-color: #333333;
     transform: translateY(-1px);
 }
 
 .chatbot-retry-btn:active {
     transform: translateY(0);
 }
 
 .chatbot-retry-btn svg {
     width: 16px;
     height: 16px;
 }
 
 /* Sources */
 .chatbot-sources {
     margin-bottom: 12px;
     padding: 12px;
     background-color: #f9f9f9;
     border-radius: 8px;
     font-size: 13px;
 }
 
 .chatbot-sources strong {
     display: block;
     margin-bottom: 8px;
     color: #333;
     font-weight: 600;
 }
 
 .chatbot-sources ol {
     margin: 4px 0 0 0;
     padding-left: 20px;
     color: #555;
 }
 
 .chatbot-sources li {
     margin: 4px 0;
     line-height: 1.4;
 }
 
 .chatbot-score {
     color: #888;
     font-size: 11px;
     font-weight: normal;
 }
 
 /* Image Gallery - Horizontal Scrolling */
 .chatbot-image-gallery {
     display: flex;
     gap: 12px;
     overflow-x: auto;
     padding: 8px 16px 8px 0; /* Right padding for scroll, no left padding */
     scroll-padding-right: 16px; /* Padding for scroll snapping to show last image fully */
     scrollbar-width: thin;
     scrollbar-color: #d1d5db transparent;
     margin-top: 12px;
     margin-right: -16px; /* Extend beyond message content padding on right */
     margin-left: -16px; /* Extend beyond message content padding on left */
     scroll-behavior: smooth;
     /* Ensure last image is fully visible */
     box-sizing: border-box;
     /* Ensure gallery can show full images without clipping */
     min-width: 0;
     width: calc(100% + 32px); /* Extend beyond message padding on both sides */
 }
 
 .chatbot-image-gallery::-webkit-scrollbar {
     height: 6px;
     display: block;
 }
 
 .chatbot-image-gallery::-webkit-scrollbar-thumb {
     background: #d1d5db;
     border-radius: 3px;
 }
 
 .chatbot-image-gallery::-webkit-scrollbar-thumb:hover {
     background: #9ca3af;
 }
 
 .chatbot-image-wrapper {
     position: relative;
     min-width: 260px; /* Slightly reduced to fit 3 images better */
     width: 260px; /* Fixed width for consistent sizing */
     height: 200px;
     border-radius: 16px;
     overflow: hidden;
     flex-shrink: 0;
 }
 
 /* Ensure last image in gallery is fully visible */
 .chatbot-image-gallery .chatbot-image-wrapper:last-child {
     margin-right: 0;
 }
 
 .chatbot-cottage-image {
     width: 100%;
     height: 100%;
     border-radius: 16px;
     object-fit: cover;
     cursor: pointer;
     transition: transform 0.2s ease;
     display: block;
 }
 
 .chatbot-cottage-image:hover {
     transform: scale(1.02);
 }
 
 /* Image loader */
 .chatbot-image-loader {
     position: absolute;
     top: 0;
     left: 0;
     width: 100%;
     height: 100%;
     background-color: var(--chatbot-gray-bg);
     display: flex;
     align-items: center;
     justify-content: center;
     z-index: 1;
     border-radius: 16px;
 }
 
 .chatbot-spinner {
     width: 40px;
     height: 40px;
     border: 4px solid var(--chatbot-gray-hover);
     border-top-color: var(--chatbot-primary-color);
     border-radius: 50%;
     animation: chatbot-spin 1s linear infinite;
 }
 
 @keyframes chatbot-spin {
     to {
         transform: rotate(360deg);
     }
 }
 
 /* Cottage images group styling */
 .chatbot-cottage-images-group {
     margin-bottom: 32px;
 }
 
 .chatbot-cottage-title {
     margin: 0 0 12px 0;
     font-size: 16px;
     font-weight: 600;
     color: var(--chatbot-text-color);
 }
 
 /* Link formatting */
 .chatbot-link-item {
     display: flex;
     align-items: center;
     gap: 8px;
     margin: 8px 0;
     padding: 8px 0;
     font-size: 14px;
 }
 
 .chatbot-link-icon {
     font-size: 16px;
     flex-shrink: 0;
 }
 
 .chatbot-link-label {
     color: var(--chatbot-text-color);
     font-weight: 500;
     flex-shrink: 0;
 }
 
 .chatbot-link {
     color: #2563eb;
     text-decoration: underline;
     cursor: pointer;
     transition: color 0.2s ease;
 }
 
 .chatbot-link:hover {
     color: #1d4ed8;
 }
 
 /* Fullscreen gallery - larger images */
 .chatbot-window.chatbot-fullscreen .chatbot-image-gallery {
     gap: 16px;
     padding: 12px 0;
 }
 
 .chatbot-window.chatbot-fullscreen .chatbot-cottage-image {
     min-width: 400px;
     height: 300px;
     border-radius: 16px;
 }
 
 .chatbot-window.chatbot-fullscreen .chatbot-cottage-images-group {
     margin-bottom: 40px;
 }
 
 .chatbot-window.chatbot-fullscreen .chatbot-cottage-title {
     font-size: 20px;
     margin-bottom: 16px;
 }
 
 .chatbot-slide {
     position: absolute;
     top: 0;
     left: 0;
     width: 100%;
     height: 100%;
     opacity: 0;
     transition: opacity 0.5s ease-in-out;
     display: flex;
     align-items: center;
     justify-content: center;
     visibility: hidden;
 }
 
 .chatbot-slide.active {
     opacity: 1;
     z-index: 1;
     visibility: visible;
 }
 
 .chatbot-slider-image {
     width: 100%;
     height: 100%;
     object-fit: cover;
     border-radius: 12px;
     display: block;
     background-color: var(--chatbot-gray-bg);
     transition: opacity 0.3s ease;
     min-width: 100%;
     min-height: 100%;
     position: relative;
 }
 
 /* Loader for slider images */
 .chatbot-slide {
     position: relative;
 }
 
 .chatbot-slider-loader {
     position: absolute;
     top: 50%;
     left: 50%;
     transform: translate(-50%, -50%);
     z-index: 2;
     display: flex;
     align-items: center;
     justify-content: center;
 }
 
 .chatbot-slider-loader .chatbot-spinner {
     width: 40px;
     height: 40px;
 }
 
 .chatbot-slider-image.loaded ~ .chatbot-slider-loader {
     display: none;
 }
 
 /* Show loading state while image loads */
 .chatbot-slider-image:not([src]),
 .chatbot-slider-image[src=""] {
     background: linear-gradient(90deg, var(--chatbot-gray-bg) 25%, var(--chatbot-gray-hover) 50%, var(--chatbot-gray-bg) 75%);
     background-size: 200% 100%;
     animation: loading 1.5s infinite;
 }
 
 /* Ensure images are visible when loaded */
 .chatbot-slider-image[src]:not([src=""]) {
     opacity: 1;
 }
 
 .chatbot-slider-image[src=""],
 .chatbot-slider-image:not([src]) {
     opacity: 0;
 }
 
 /* Loading state */
 .chatbot-slider-image:not([src]),
 .chatbot-slider-image[src=""] {
     background: linear-gradient(90deg, var(--chatbot-gray-bg) 25%, var(--chatbot-gray-hover) 50%, var(--chatbot-gray-bg) 75%);
     background-size: 200% 100%;
     animation: loading 1.5s infinite;
 }
 
 @keyframes loading {
     0% {
         background-position: 200% 0;
     }
     100% {
         background-position: -200% 0;
     }
 }
 
 /* Navigation Buttons */
 .chatbot-slider-prev,
 .chatbot-slider-next {
     position: absolute;
     top: 50%;
     transform: translateY(-50%);
     background-color: rgba(0, 0, 0, 0.6);
     color: white;
     border: none;
     width: 44px;
     height: 44px;
     border-radius: 50%;
     cursor: pointer;
     font-size: 24px;
     line-height: 1;
     display: flex;
     align-items: center;
     justify-content: center;
     z-index: 10;
     transition: background-color 0.2s, transform 0.2s;
     user-select: none;
 }
 
 .chatbot-slider-prev:hover,
 .chatbot-slider-next:hover {
     background-color: rgba(0, 0, 0, 0.8);
     transform: translateY(-50%) scale(1.1);
 }
 
 .chatbot-slider-prev:active,
 .chatbot-slider-next:active {
     transform: translateY(-50%) scale(0.95);
 }
 
 .chatbot-slider-prev {
     left: 12px;
 }
 
 .chatbot-slider-next {
     right: 12px;
 }
 
 /* Larger navigation buttons in fullscreen */
 .chatbot-window.chatbot-fullscreen .chatbot-slider-prev,
 .chatbot-window.chatbot-fullscreen .chatbot-slider-next {
     width: 56px;
     height: 56px;
     font-size: 28px;
 }
 
 .chatbot-window.chatbot-fullscreen .chatbot-slider-prev {
     left: 20px;
 }
 
 .chatbot-window.chatbot-fullscreen .chatbot-slider-next {
     right: 20px;
 }
 
 /* Dot Indicators */
 .chatbot-slider-dots {
     position: absolute;
     bottom: 16px;
     left: 50%;
     transform: translateX(-50%);
     display: flex;
     gap: 8px;
     z-index: 10;
     background-color: rgba(0, 0, 0, 0.3);
     padding: 8px 12px;
     border-radius: 20px;
 }
 
 .chatbot-slider-dot {
     width: 10px;
     height: 10px;
     border-radius: 50%;
     background-color: rgba(255, 255, 255, 0.5);
     cursor: pointer;
     transition: background-color 0.2s, transform 0.2s;
     border: 2px solid transparent;
 }
 
 /* Larger dots in fullscreen */
 .chatbot-window.chatbot-fullscreen .chatbot-slider-dots {
     bottom: 24px;
     padding: 10px 16px;
     gap: 10px;
 }
 
 .chatbot-window.chatbot-fullscreen .chatbot-slider-dot {
     width: 12px;
     height: 12px;
 }
 
 .chatbot-slider-dot:hover {
     background-color: rgba(255, 255, 255, 0.8);
     transform: scale(1.2);
 }
 
 .chatbot-slider-dot.active {
     background-color: white;
     transform: scale(1.3);
     border-color: var(--chatbot-primary-color);
 }
 
 /* Larger dots in fullscreen */
 .chatbot-window.chatbot-fullscreen .chatbot-slider-dots {
     bottom: 24px;
     padding: 10px 16px;
     gap: 10px;
 }
 
 .chatbot-window.chatbot-fullscreen .chatbot-slider-dot {
     width: 12px;
     height: 12px;
 }
 
 /* Legacy support for old image grid (if needed) */
 .chatbot-images {
     margin-top: 12px;
     display: grid;
     grid-template-columns: repeat(2, 1fr);
     gap: 8px;
 }
 
 .chatbot-image {
     width: 100%;
     height: auto;
     border-radius: 8px;
     object-fit: cover;
     cursor: pointer;
     transition: transform 0.2s;
 }
 
 .chatbot-image:hover {
     transform: scale(1.05);
 }
 
 /* Welcome Screen - positioned within messages container only */
 .chatbot-welcome {
     position: absolute;
     top: 0;
     left: 0;
     right: 0;
     bottom: 0;
     display: flex;
     align-items: center;
     justify-content: center;
     padding: 24px;
     overflow-y: auto;
     background-color: var(--chatbot-bg-color);
     z-index: 2;
     pointer-events: none;
 }
 
 .chatbot-welcome-content {
     pointer-events: auto;
     width: 100%;
     max-width: 800px;
     margin: auto;
 }
 
 .chatbot-welcome-content {
     max-width: 800px;
     width: 100%;
     text-align: center;
 }
 
 .chatbot-welcome-icon {
     width: 64px;
     height: 64px;
     background-color: var(--chatbot-primary-color);
     border-radius: 50%;
     display: flex;
     align-items: center;
     justify-content: center;
     margin: 0 auto 24px;
     color: white;
 }
 
 .chatbot-welcome-icon svg {
     width: 32px;
     height: 32px;
 }
 
 .chatbot-welcome-title {
     font-size: 30px;
     font-weight: 600;
     color: var(--chatbot-text-color);
     margin: 0 0 16px;
     line-height: 1.2;
 }
 
 .chatbot-welcome-description {
     font-size: 16px;
     color: #6b7280;
     margin: 0 0 32px;
     line-height: 1.5;
 }
 
 /* Suggestion Cards */
 .chatbot-suggestion-cards {
     display: grid;
     grid-template-columns: repeat(2, 1fr);
     gap: 16px;
     margin-bottom: 48px;
 }
 
 /* Small window (not fullscreen) - cards in single column with smaller fonts */
 .chatbot-window:not(.chatbot-fullscreen) .chatbot-suggestion-cards {
     grid-template-columns: 1fr !important;
     gap: 10px !important;
     margin-bottom: 20px !important;
 }
 
 .chatbot-window:not(.chatbot-fullscreen) .chatbot-suggestion-card {
     padding: 10px 12px !important;
 }
 
 .chatbot-window:not(.chatbot-fullscreen) .chatbot-card-title {
     font-size: 12px !important;
     font-weight: 500 !important;
     margin-bottom: 2px !important;
 }
 
 .chatbot-window:not(.chatbot-fullscreen) .chatbot-card-subtitle {
     font-size: 10px !important;
     line-height: 1.3 !important;
 }
 
 .chatbot-window:not(.chatbot-fullscreen) .chatbot-welcome-title {
     font-size: 20px !important;
     margin-bottom: 12px !important;
 }
 
 .chatbot-window:not(.chatbot-fullscreen) .chatbot-welcome-description {
     font-size: 13px !important;
     margin-bottom: 20px !important;
 }
 
 .chatbot-window:not(.chatbot-fullscreen) .chatbot-welcome-icon {
     width: 48px !important;
     height: 48px !important;
     margin-bottom: 16px !important;
 }
 
 .chatbot-window:not(.chatbot-fullscreen) .chatbot-welcome-icon svg {
     width: 24px !important;
     height: 24px !important;
 }
 
 .chatbot-suggestion-card {
     background-color: var(--chatbot-gray-bg);
     border: 1px solid var(--chatbot-border-color);
     border-radius: var(--chatbot-radius-xl);
     padding: 16px;
     cursor: pointer;
     transition: background-color 0.2s, border-color 0.2s;
     text-align: left;
 }
 
 .chatbot-suggestion-card:hover {
     background-color: var(--chatbot-gray-hover);
     border-color: var(--chatbot-border-color-light);
 }
 
 .chatbot-card-content {
     display: flex;
     flex-direction: column;
     gap: 4px;
 }
 
 .chatbot-card-title {
     font-size: 14px;
     font-weight: 500;
     color: var(--chatbot-text-color);
     margin: 0;
 }
 
 .chatbot-card-subtitle {
     font-size: 12px;
     color: #6b7280;
     margin: 0;
     line-height: 1.4;
 }
 
 /* Follow-up Actions */
 .chatbot-follow-up-actions {
     margin-top: 16px;
     padding-top: 16px;
     border-top: 1px solid var(--chatbot-border-color-light);
 }
 
 .chatbot-quick-actions {
     display: flex;
     flex-wrap: wrap;
     gap: 8px;
     margin-bottom: 12px;
 }
 
 .chatbot-quick-action-btn {
     padding: 10px 16px;
     background-color: var(--chatbot-primary-color, #007bff);
     color: white;
     border: none;
     border-radius: var(--chatbot-radius-lg, 8px);
     font-size: 14px;
     font-weight: 500;
     cursor: pointer;
     transition: background-color 0.2s, transform 0.1s;
     white-space: nowrap;
 }
 
 .chatbot-quick-action-btn:hover {
     background-color: var(--chatbot-primary-color-hover, #0056b3);
     transform: translateY(-1px);
 }
 
 .chatbot-quick-action-btn:active {
     transform: translateY(0);
 }
 
 .chatbot-suggestions {
     display: flex;
     flex-wrap: wrap;
     gap: 8px;
 }
 
 .chatbot-suggestion-chip {
     padding: 8px 14px;
     background-color: var(--chatbot-gray-bg, #f3f4f6);
     color: var(--chatbot-text-color, #1f2937);
     border: 1px solid var(--chatbot-border-color-light, #e5e7eb);
     border-radius: var(--chatbot-radius-full, 9999px);
     font-size: 13px;
     cursor: pointer;
     transition: background-color 0.2s, border-color 0.2s, transform 0.1s;
     white-space: nowrap;
 }
 
 .chatbot-suggestion-chip:hover {
     background-color: var(--chatbot-gray-hover, #e5e7eb);
     border-color: var(--chatbot-border-color, #d1d5db);
     transform: translateY(-1px);
 }
 
 .chatbot-suggestion-chip:active {
     transform: translateY(0);
 }
 
 /* Input Container */
 .chatbot-input-container {
     padding: 24px;
     background-color: var(--chatbot-bg-color);
     border-top: 1px solid var(--chatbot-border-color);
     flex-shrink: 0;
     position: relative;
     z-index: 10;
 }
 
 .chatbot-input-wrapper {
     position: relative;
     max-width: 768px;
     margin: 0 auto;
     background-color: var(--chatbot-bg-color);
     border: 1px solid var(--chatbot-border-color-light);
     border-radius: var(--chatbot-radius-xl);
     box-shadow: var(--chatbot-shadow);
 }
 
 .chatbot-input {
     width: 100%;
     padding: 16px 48px 16px 48px;
     border: none;
     border-radius: var(--chatbot-radius-xl);
     font-size: 14px;
     font-family: inherit;
     outline: none;
     resize: none;
     min-height: 50px;
     max-height: 200px;
     line-height: 1.5;
     color: var(--chatbot-text-color);
     background-color: transparent;
     box-sizing: border-box;
 }
 
 .chatbot-input::placeholder {
     color: #9ca3af;
 }
 
 .chatbot-input:focus {
     outline: none;
 }
 
 .chatbot-send {
     position: absolute;
     right: 12px;
     bottom: 12px;
     width: 32px;
     height: 32px;
     border-radius: 8px;
     background-color: var(--chatbot-primary-color);
     color: white;
     border: none;
     cursor: pointer;
     display: flex;
     align-items: center;
     justify-content: center;
     transition: background-color 0.2s;
     flex-shrink: 0;
     padding: 0;
 }
 
 .chatbot-send:hover:not(:disabled) {
     background-color: #333333;
 }
 
 .chatbot-send:active:not(:disabled) {
     transform: scale(0.95);
 }
 
 .chatbot-send:disabled {
     background-color: var(--chatbot-gray-hover);
     color: #9ca3af;
     cursor: not-allowed;
     opacity: 1;
 }
 
 .chatbot-send svg {
     width: 16px;
     height: 16px;
 }
 
 .chatbot-disclaimer {
     text-align: center;
     font-size: 12px;
     color: #6b7280;
     margin-top: 8px;
     max-width: 768px;
     margin-left: auto;
     margin-right: auto;
 }
 
 /* Desktop fullscreen overrides - ensure these take precedence */
 @media (min-width: 769px) {
     .chatbot-window.chatbot-fullscreen {
         width: 90vw !important;
         max-width: 1400px !important;
         min-width: 800px !important;
         height: 85vh !important;
         top: 50% !important;
         left: 50% !important;
         transform: translate(-50%, -50%) !important;
         border-radius: 12px !important;
     }
     
     .chatbot-window.chatbot-fullscreen .chatbot-input-container {
         display: block !important;
         visibility: visible !important;
         opacity: 1 !important;
         padding: 24px !important;
     }
     
     .chatbot-window.chatbot-fullscreen .chatbot-input-wrapper {
         display: block !important;
         visibility: visible !important;
         opacity: 1 !important;
         max-width: 100% !important;
     }
     
     .chatbot-window.chatbot-fullscreen .chatbot-input {
         display: block !important;
         visibility: visible !important;
         opacity: 1 !important;
         width: 100% !important;
     }
     
     .chatbot-window.chatbot-fullscreen .chatbot-send {
         display: flex !important;
         visibility: visible !important;
         opacity: 1 !important;
     }
     
     .chatbot-window.chatbot-fullscreen .chatbot-header {
         display: flex !important;
         visibility: visible !important;
         opacity: 1 !important;
         padding: 16px 24px !important;
         border-radius: 12px 12px 0 0 !important;
         background-color: var(--chatbot-bg-color) !important;
         border-bottom: 1px solid var(--chatbot-border-color) !important;
     }
     
     .chatbot-window.chatbot-fullscreen .chatbot-header-title {
         display: block !important;
         visibility: visible !important;
         opacity: 1 !important;
         font-size: 20px !important;
         color: var(--chatbot-text-color) !important;
     }
     
     .chatbot-window.chatbot-fullscreen .chatbot-header-actions {
         display: flex !important;
         visibility: visible !important;
         opacity: 1 !important;
     }
     
     .chatbot-window.chatbot-fullscreen .chatbot-icon-btn {
         display: flex !important;
         visibility: visible !important;
         opacity: 1 !important;
         width: 32px !important;
         height: 32px !important;
         color: var(--chatbot-text-color) !important;
     }
 }
 
 /* Fullscreen Image Viewer - Base Styles (All Screen Sizes) */
 .chatbot-image-fullscreen-overlay {
     position: absolute;
     top: 0;
     left: 0;
     width: 100%;
     height: 100%;
     background-color: rgba(0, 0, 0, 0.95);
     z-index: 100000000;
     display: flex;
     align-items: center;
     justify-content: center;
     opacity: 0;
     transition: opacity 0.3s ease;
     cursor: pointer;
 }
 
 .chatbot-image-fullscreen-overlay.active {
     opacity: 1;
 }
 
 /* When chat window is in fullscreen mode for images */
 #chatbot-window.chatbot-image-fullscreen-mode {
     position: fixed !important;
     top: 0 !important;
     left: 0 !important;
     right: 0 !important;
     bottom: 0 !important;
     width: 100vw !important;
     height: 100vh !important;
     max-width: 100vw !important;
     max-height: 100vh !important;
     border-radius: 0 !important;
     z-index: 99999999 !important;
 }
 
 .chatbot-image-fullscreen-container {
     position: relative !important;
     width: 100% !important;
     height: 100% !important;
     display: flex !important;
     align-items: center !important;
     justify-content: center !important;
     padding: 40px !important;
     box-sizing: border-box !important;
     pointer-events: none !important;
 }
 
 .chatbot-image-fullscreen-container button {
     pointer-events: auto !important;
 }
 
 .chatbot-image-fullscreen-content {
     position: relative;
     max-width: 100%;
     max-height: 100%;
     display: flex;
     align-items: center;
     justify-content: center;
     pointer-events: none;
 }
 
 .chatbot-image-fullscreen-content img {
     pointer-events: auto;
 }
 
 .chatbot-image-fullscreen-img {
     max-width: 100%;
     max-height: 100%;
     object-fit: contain;
     border-radius: 8px;
     cursor: default;
     user-select: none;
 }
 
 /* Close button - Visible in fullscreen overlay */
 .chatbot-image-fullscreen-overlay .chatbot-image-fullscreen-close {
     position: absolute !important;
     top: 20px !important;
     right: 20px !important;
     width: 48px !important;
     height: 48px !important;
     background-color: rgba(255, 255, 255, 0.2) !important;
     border: 2px solid rgba(255, 255, 255, 0.4) !important;
     border-radius: 50% !important;
     color: white !important;
     cursor: pointer !important;
     display: flex !important;
     align-items: center !important;
     justify-content: center !important;
     transition: all 0.2s ease !important;
     z-index: 100000001 !important;
     user-select: none !important;
     box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4) !important;
     visibility: visible !important;
     opacity: 1 !important;
     pointer-events: auto !important;
 }
 
 .chatbot-image-fullscreen-overlay .chatbot-image-fullscreen-close svg {
     width: 20px !important;
     height: 20px !important;
     stroke: white !important;
 }
 
 .chatbot-image-fullscreen-overlay .chatbot-image-fullscreen-close:hover {
     background-color: rgba(255, 255, 255, 0.3) !important;
     border-color: rgba(255, 255, 255, 0.6) !important;
     transform: scale(1.1) !important;
     box-shadow: 0 6px 16px rgba(0, 0, 0, 0.5) !important;
 }
 
 .chatbot-image-fullscreen-overlay .chatbot-image-fullscreen-close:active {
     transform: scale(0.95) !important;
 }
 
 /* Navigation buttons - Visible in fullscreen overlay */
 .chatbot-image-fullscreen-overlay .chatbot-image-fullscreen-prev,
 .chatbot-image-fullscreen-overlay .chatbot-image-fullscreen-next {
     position: absolute !important;
     top: 50% !important;
     transform: translateY(-50%) !important;
     width: 56px !important;
     height: 56px !important;
     background-color: rgba(255, 255, 255, 0.2) !important;
     border: 2px solid rgba(255, 255, 255, 0.4) !important;
     border-radius: 50% !important;
     color: white !important;
     cursor: pointer !important;
     display: flex !important;
     align-items: center !important;
     justify-content: center !important;
     transition: all 0.2s ease !important;
     z-index: 100000001 !important;
     user-select: none !important;
     box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4) !important;
     pointer-events: auto !important;
     visibility: visible !important;
     opacity: 1 !important;
 }
 
 .chatbot-image-fullscreen-overlay .chatbot-image-fullscreen-prev svg,
 .chatbot-image-fullscreen-overlay .chatbot-image-fullscreen-next svg {
     width: 24px !important;
     height: 24px !important;
     stroke: white !important;
 }
 
 .chatbot-image-fullscreen-overlay .chatbot-image-fullscreen-prev {
     left: 20px !important;
 }
 
 .chatbot-image-fullscreen-overlay .chatbot-image-fullscreen-next {
     right: 20px !important;
 }
 
 .chatbot-image-fullscreen-overlay .chatbot-image-fullscreen-prev:hover,
 .chatbot-image-fullscreen-overlay .chatbot-image-fullscreen-next:hover {
     background-color: rgba(255, 255, 255, 0.3) !important;
     border-color: rgba(255, 255, 255, 0.6) !important;
     transform: translateY(-50%) scale(1.1) !important;
     box-shadow: 0 6px 16px rgba(0, 0, 0, 0.5) !important;
 }
 
 .chatbot-image-fullscreen-overlay .chatbot-image-fullscreen-prev:active,
 .chatbot-image-fullscreen-overlay .chatbot-image-fullscreen-next:active {
     transform: translateY(-50%) scale(0.95) !important;
 }
 
 /* Ensure buttons are hidden in regular gallery */
 .chatbot-image-gallery .chatbot-image-fullscreen-close,
 .chatbot-image-wrapper .chatbot-image-fullscreen-close,
 .chatbot-image-gallery .chatbot-image-fullscreen-prev,
 .chatbot-image-gallery .chatbot-image-fullscreen-next,
 .chatbot-image-wrapper .chatbot-image-fullscreen-prev,
 .chatbot-image-wrapper .chatbot-image-fullscreen-next {
     display: none !important;
 }
 
 .chatbot-image-fullscreen-counter {
     position: absolute;
     bottom: 20px;
     left: 50%;
     transform: translateX(-50%);
     background-color: rgba(0, 0, 0, 0.6);
     color: white;
     padding: 8px 16px;
     border-radius: 20px;
     font-size: 14px;
     font-weight: 500;
     z-index: 100000002;
     pointer-events: none;
 }
 
 /* Hide fullscreen button on mobile */
 @media (max-width: 768px) {
     #chatbot-fullscreen.chatbot-icon-btn {
         display: none !important;
         visibility: hidden !important;
         opacity: 0 !important;
         width: 0 !important;
         height: 0 !important;
         padding: 0 !important;
         margin: 0 !important;
     }
 }
 
 /* Responsive Design */
 @media (max-width: 768px) {
     /* Ensure widget container doesn't interfere */
     #chatbot-widget.chatbot-widget {
         position: fixed !important;
         top: 0 !important;
         left: 0 !important;
         right: 0 !important;
         bottom: 0 !important;
         width: 100vw !important;
         height: 100vh !important;
         margin: 0 !important;
         padding: 0 !important;
         z-index: 9999999 !important; /* Very high z-index to override WordPress */
     }
     
     /* Fullscreen window on mobile - only apply when NOT in desktop fullscreen mode */
     #chatbot-window.chatbot-window:not(.chatbot-fullscreen) {
         position: fixed !important;
         top: 0 !important;
         left: 0 !important;
         right: 0 !important;
         bottom: 0 !important;
         width: 100vw !important;
         height: 100vh !important;
         max-height: 100vh !important;
         max-width: 100vw !important;
         min-width: 100vw !important;
         min-height: 100vh !important;
         border-radius: 0 !important;
         margin: 0 !important;
         padding: 0 !important;
         z-index: 9999999 !important; /* Very high z-index to override WordPress */
         transform: none !important;
         /* Support for devices with notches */
         padding-top: env(safe-area-inset-top) !important;
         padding-bottom: env(safe-area-inset-bottom) !important;
         padding-left: env(safe-area-inset-left) !important;
         padding-right: env(safe-area-inset-right) !important;
     }
     
     /* Mobile fullscreen mode - keep 100% on mobile */
     #chatbot-window.chatbot-window.chatbot-fullscreen {
         position: fixed !important;
         top: 0 !important;
         left: 0 !important;
         right: 0 !important;
         bottom: 0 !important;
         width: 100vw !important;
         height: 100vh !important;
         padding: 0 !important;
         display: flex !important;
         flex-direction: column !important;
         transform: none !important;
         border-radius: 0 !important;
     }
     
     /* Override any positioning from parent */
     .chatbot-bottom-right #chatbot-window.chatbot-window,
     .chatbot-bottom-left #chatbot-window.chatbot-window,
     #chatbot-widget.chatbot-bottom-right #chatbot-window.chatbot-window,
     #chatbot-widget.chatbot-bottom-left #chatbot-window.chatbot-window {
         position: fixed !important;
         top: 0 !important;
         left: 0 !important;
         right: 0 !important;
         bottom: 0 !important;
         width: 100vw !important;
         height: 100vh !important;
     }
     
     /* Toggle button positioning - only when chat is closed */
     #chatbot-widget.chatbot-bottom-right,
     #chatbot-widget.chatbot-bottom-left {
         position: fixed !important;
     }
     
     #chatbot-widget.chatbot-bottom-right {
         bottom: 16px !important;
         right: 16px !important;
         left: auto !important;
         top: auto !important;
     }
     
     #chatbot-widget.chatbot-bottom-left {
         bottom: 16px !important;
         left: 16px !important;
         right: auto !important;
         top: auto !important;
     }
     
     #chatbot-toggle.chatbot-toggle {
         width: 56px !important;
         height: 56px !important;
         position: fixed !important;
         z-index: 9999999 !important; /* Above WordPress headers */
         margin: 0 !important;
     }
     
     /* Hide toggle button when chat window is open on mobile */
     #chatbot-widget.chatbot-open #chatbot-toggle.chatbot-toggle {
         display: none !important;
         visibility: hidden !important;
         opacity: 0 !important;
     }
     
     /* When chat is open, widget should cover entire screen and hide site */
     #chatbot-widget.chatbot-open {
         position: fixed !important;
         top: 0 !important;
         left: 0 !important;
         right: 0 !important;
         bottom: 0 !important;
         width: 100vw !important;
         height: 100vh !important;
         background-color: var(--chatbot-bg-color) !important;
         z-index: 99999999 !important; /* Even higher to ensure it's on top */
     }
     
     /* Create a fullscreen overlay that hides everything behind it */
     #chatbot-widget.chatbot-open::after {
         content: '';
         position: fixed;
         top: 0;
         left: 0;
         right: 0;
         bottom: 0;
         background-color: var(--chatbot-bg-color);
         z-index: -1;
         width: 100vw;
         height: 100vh;
     }
     
     /* Header on mobile - ensure it's visible */
     #chatbot-window.chatbot-window .chatbot-header {
         padding: 12px 16px !important;
         padding-top: calc(12px + env(safe-area-inset-top)) !important;
         border-radius: 0 !important;
         flex-shrink: 0 !important;
         margin: 0 !important;
         width: 100% !important;
         box-sizing: border-box !important;
         display: flex !important;
         visibility: visible !important;
         opacity: 1 !important;
     }
     
     .chatbot-header-title {
         font-size: 18px !important;
     }
     
     .chatbot-logo {
         width: 28px !important;
         height: 28px !important;
     }
     
     .chatbot-logo svg {
         width: 18px !important;
         height: 18px !important;
     }
     
     /* Welcome screen mobile */
     .chatbot-welcome {
         padding: 16px !important;
     }
     
     .chatbot-welcome-icon {
         width: 56px !important;
         height: 56px !important;
         margin-bottom: 20px !important;
     }
     
     .chatbot-welcome-icon svg {
         width: 28px !important;
         height: 28px !important;
     }
     
     .chatbot-welcome-title {
         font-size: 24px !important;
         margin-bottom: 12px !important;
     }
     
     .chatbot-welcome-description {
         font-size: 14px !important;
         margin-bottom: 24px !important;
     }
     
     /* Suggestion cards mobile - stack to 1 column */
     .chatbot-suggestion-cards {
         grid-template-columns: 1fr !important;
         gap: 12px !important;
         margin-bottom: 32px !important;
     }
     
     .chatbot-suggestion-card {
         padding: 14px !important;
     }
     
     .chatbot-card-title {
         font-size: 13px !important;
     }
     
     .chatbot-card-subtitle {
         font-size: 11px !important;
     }
     
     .chatbot-header h3 {
         font-size: 16px;
         white-space: nowrap;
         overflow: hidden;
         text-overflow: ellipsis;
         flex: 1;
         min-width: 0;
     }
     
     .chatbot-header-actions {
         flex-shrink: 0;
     }
     
     .chatbot-icon-btn {
         width: 40px;
         height: 40px;
         padding: 8px;
         min-width: 40px;
         min-height: 40px;
     }
     
     .chatbot-icon-btn svg {
         width: 18px;
         height: 18px;
     }
     
     .chatbot-messages {
         padding: 16px 12px !important;
         gap: 12px !important;
         flex: 1 !important;
         min-height: 0 !important;
         -webkit-overflow-scrolling: touch !important;
         overflow-y: auto !important;
         width: 100% !important;
         box-sizing: border-box !important;
         display: flex !important;
         flex-direction: column !important;
         overflow-x: hidden !important;
         /* Prevent blur effects during image loading */
         filter: none !important;
         backdrop-filter: none !important;
         -webkit-backdrop-filter: none !important;
     }
     
     .chatbot-message {
         max-width: 85%;
     }
     
     .chatbot-message-content {
         padding: 10px 14px;
         font-size: 14px;
         line-height: 1.4;
     }
     
     .chatbot-input-container {
         display: block !important;
         visibility: visible !important;
         opacity: 1 !important;
         padding: 16px !important;
         padding-bottom: calc(16px + env(safe-area-inset-bottom)) !important;
         flex-shrink: 0 !important;
         border-top: 1px solid var(--chatbot-border-color) !important;
         margin: 0 !important;
         width: 100% !important;
         box-sizing: border-box !important;
         position: relative !important;
         z-index: 10 !important;
         background-color: var(--chatbot-bg-color) !important;
     }
     
     .chatbot-input-wrapper {
         width: 100% !important;
         max-width: 100% !important;
     }
     
     .chatbot-input {
         display: block !important;
         visibility: visible !important;
         opacity: 1 !important;
         padding: 12px 44px 12px 12px !important;
         font-size: 16px !important; /* Prevents zoom on iOS */
         -webkit-appearance: none !important;
         appearance: none !important;
         border-radius: var(--chatbot-radius-xl) !important;
         width: 100% !important;
         min-height: 50px !important;
         max-height: 200px !important;
         border: 1px solid var(--chatbot-border-color-light) !important;
         background-color: var(--chatbot-bg-color) !important;
         color: var(--chatbot-text-color) !important;
         position: relative !important;
         z-index: 1 !important;
         resize: none !important;
         font-family: inherit !important;
     }
     
     .chatbot-input:focus {
         outline: none !important;
         border-color: var(--chatbot-border-color-light) !important;
     }
     
     .chatbot-send {
         display: flex !important;
         visibility: visible !important;
         opacity: 1 !important;
         width: 32px !important;
         height: 32px !important;
         min-width: 32px !important;
         min-height: 32px !important;
         flex-shrink: 0 !important;
         position: absolute !important;
         right: 12px !important;
         bottom: 12px !important;
         z-index: 2 !important;
         background-color: var(--chatbot-primary-color) !important;
         border: none !important;
         cursor: pointer !important;
         border-radius: 8px !important;
     }
     
     .chatbot-send:disabled {
         background-color: var(--chatbot-gray-hover) !important;
         color: #9ca3af !important;
     }
     
     .chatbot-send svg {
         display: block !important;
         visibility: visible !important;
         opacity: 1 !important;
         width: 16px !important;
         height: 16px !important;
         color: white !important;
     }
     
     .chatbot-disclaimer {
         font-size: 11px !important;
         margin-top: 8px !important;
     }
     
     .chatbot-images {
         grid-template-columns: 1fr;
         gap: 8px;
     }
     
     .chatbot-image {
         max-height: 300px;
         object-fit: cover;
     }
     
     /* Image Slider Mobile */
     .chatbot-image-slider {
         margin-top: 12px;
     }
     
     .chatbot-slider-container {
         height: 300px !important; /* Smaller height on mobile */
     }
     
     .chatbot-slider-prev,
     .chatbot-slider-next {
         width: 36px !important;
         height: 36px !important;
         font-size: 20px !important;
     }
     
     .chatbot-slider-prev {
         left: 8px !important;
     }
     
     .chatbot-slider-next {
         right: 8px !important;
     }
     
     .chatbot-slider-dots {
         bottom: 12px !important;
         padding: 6px 10px !important;
     }
     
     .chatbot-slider-dot {
         width: 8px !important;
         height: 8px !important;
     }
     
     /* Fullscreen image viewer */
     /* Widget-scoped fullscreen overlay */
     .chatbot-image-fullscreen-overlay {
         position: absolute;
         top: 0;
         left: 0;
         width: 100%;
         height: 100%;
         background-color: rgba(0, 0, 0, 0.95);
         z-index: 100000000;
         display: flex;
         align-items: center;
         justify-content: center;
         opacity: 0;
         transition: opacity 0.3s ease;
         cursor: pointer;
     }
     
     /* When chat window is in fullscreen mode for images */
     #chatbot-window.chatbot-image-fullscreen-mode {
         position: fixed !important;
         top: 0 !important;
         left: 0 !important;
         right: 0 !important;
         bottom: 0 !important;
         width: 100vw !important;
         height: 100vh !important;
         max-width: 100vw !important;
         max-height: 100vh !important;
         border-radius: 0 !important;
         z-index: 99999999 !important;
     }
     
     .chatbot-image-fullscreen-overlay.active {
         opacity: 1;
     }
     
     .chatbot-image-fullscreen-container {
         position: relative !important;
         width: 100% !important;
         height: 100% !important;
         display: flex !important;
         align-items: center !important;
         justify-content: center !important;
         padding: 40px !important;
         box-sizing: border-box !important;
         pointer-events: none !important;
     }
     
     .chatbot-image-fullscreen-container button {
         pointer-events: auto !important;
     }
     
     .chatbot-image-fullscreen-content {
         position: relative;
         max-width: 100%;
         max-height: 100%;
         display: flex;
         align-items: center;
         justify-content: center;
         pointer-events: none;
     }
     
     .chatbot-image-fullscreen-content img {
         pointer-events: auto;
     }
     
     .chatbot-image-fullscreen-img {
         max-width: 100%;
         max-height: 100%;
         object-fit: contain;
         border-radius: 8px;
         cursor: default;
         user-select: none;
     }
     
     /* Close button - ONLY visible in fullscreen overlay */
     .chatbot-image-fullscreen-overlay .chatbot-image-fullscreen-close {
         position: absolute !important;
         top: 20px !important;
         right: 20px !important;
         width: 44px !important;
         height: 44px !important;
         background-color: rgba(255, 255, 255, 0.15) !important;
         border: 1px solid rgba(255, 255, 255, 0.3) !important;
         border-radius: 50% !important;
         color: white !important;
         font-size: 24px !important;
         font-weight: bold !important;
         line-height: 1 !important;
         cursor: pointer !important;
         display: flex !important;
         align-items: center !important;
         justify-content: center !important;
         transition: background-color 0.2s, transform 0.2s, border-color 0.2s !important;
         z-index: 100000001 !important;
         user-select: none !important;
         box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;
         visibility: visible !important;
         opacity: 1 !important;
         pointer-events: auto !important;
     }
     
     .chatbot-image-fullscreen-overlay .chatbot-image-fullscreen-close:hover {
         background-color: rgba(255, 255, 255, 0.25);
         border-color: rgba(255, 255, 255, 0.5);
         transform: scale(1.1);
     }
     
     .chatbot-image-fullscreen-overlay .chatbot-image-fullscreen-close:active {
         transform: scale(0.95);
     }
     
     /* Ensure close button is hidden in regular gallery */
     .chatbot-image-gallery .chatbot-image-fullscreen-close,
     .chatbot-image-wrapper .chatbot-image-fullscreen-close {
         display: none !important;
     }
     
     /* Navigation buttons - ONLY visible in fullscreen overlay */
     .chatbot-image-fullscreen-overlay .chatbot-image-fullscreen-prev,
     .chatbot-image-fullscreen-overlay .chatbot-image-fullscreen-next {
         position: absolute !important;
         top: 50% !important;
         transform: translateY(-50%) !important;
         width: 50px !important;
         height: 50px !important;
         background-color: rgba(255, 255, 255, 0.15) !important;
         border: 1px solid rgba(255, 255, 255, 0.3) !important;
         border-radius: 50% !important;
         color: white !important;
         font-size: 36px !important;
         font-weight: bold !important;
         line-height: 1 !important;
         cursor: pointer !important;
         display: flex !important;
         align-items: center !important;
         justify-content: center !important;
         transition: background-color 0.2s, transform 0.2s, border-color 0.2s !important;
         z-index: 100000001 !important;
         user-select: none !important;
         box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;
         pointer-events: auto !important;
         visibility: visible !important;
         opacity: 1 !important;
     }
     
     .chatbot-image-fullscreen-overlay .chatbot-image-fullscreen-prev {
         left: 20px !important;
     }
     
     .chatbot-image-fullscreen-overlay .chatbot-image-fullscreen-next {
         right: 20px !important;
     }
     
     .chatbot-image-fullscreen-overlay .chatbot-image-fullscreen-prev:hover,
     .chatbot-image-fullscreen-overlay .chatbot-image-fullscreen-next:hover {
         background-color: rgba(255, 255, 255, 0.25);
         border-color: rgba(255, 255, 255, 0.5);
         transform: translateY(-50%) scale(1.1);
     }
     
     .chatbot-image-fullscreen-overlay .chatbot-image-fullscreen-prev:active,
     .chatbot-image-fullscreen-overlay .chatbot-image-fullscreen-next:active {
         transform: translateY(-50%) scale(0.95);
     }
     
     /* Ensure navigation buttons are hidden in regular gallery */
     .chatbot-image-gallery .chatbot-image-fullscreen-prev,
     .chatbot-image-gallery .chatbot-image-fullscreen-next,
     .chatbot-image-wrapper .chatbot-image-fullscreen-prev,
     .chatbot-image-wrapper .chatbot-image-fullscreen-next {
         display: none !important;
     }
     
     .chatbot-image-fullscreen-counter {
         position: absolute;
         bottom: 20px;
         left: 50%;
         transform: translateX(-50%);
         background-color: rgba(0, 0, 0, 0.6);
         color: white;
         padding: 8px 16px;
         border-radius: 20px;
         font-size: 14px;
         font-weight: 500;
         user-select: none;
     }
     
     .chatbot-sources {
         padding: 10px;
         font-size: 12px;
         line-height: 1.4;
     }
     
     .chatbot-menu-dropdown {
         right: 8px;
         min-width: 160px;
         max-width: calc(100vw - 32px);
     }
     
     .chatbot-menu-item {
         padding: 10px 12px;
         font-size: 14px;
         min-height: 44px;
     }
     
     .chatbot-close {
         width: 36px;
         height: 36px;
         font-size: 24px;
         min-width: 36px;
         min-height: 36px;
     }
 }
 
 /* Extra small devices */
 @media (max-width: 480px) {
     .chatbot-toggle {
         width: 52px;
         height: 52px;
     }
     
     .chatbot-bottom-right {
         right: 12px;
     }
     
     .chatbot-bottom-left {
         left: 12px;
     }
     
     .chatbot-header {
         padding: 10px 12px;
     }
     
     .chatbot-header h3 {
         font-size: 15px;
     }
     
     .chatbot-icon-btn {
         width: 36px;
         height: 36px;
         min-width: 36px;
         min-height: 36px;
         padding: 6px;
     }
     
     .chatbot-icon-btn svg {
         width: 16px;
         height: 16px;
     }
     
     .chatbot-messages {
         padding: 12px 10px;
         gap: 10px;
     }
     
     .chatbot-message {
         max-width: 90%;
     }
     
     .chatbot-message-content {
         padding: 8px 12px;
         font-size: 13px;
         line-height: 1.4;
     }
     
     .chatbot-input-container {
         display: flex !important;
         visibility: visible !important;
         opacity: 1 !important;
         padding: 10px !important;
         padding-bottom: calc(10px + env(safe-area-inset-bottom)) !important;
     }
     
     .chatbot-input {
         display: block !important;
         visibility: visible !important;
         opacity: 1 !important;
         padding: 10px 14px !important;
         font-size: 16px !important; /* Keep 16px to prevent iOS zoom */
         width: 100% !important;
         flex: 1 !important;
     }
     
     .chatbot-send {
         display: flex !important;
         visibility: visible !important;
         opacity: 1 !important;
         width: 40px !important;
         height: 40px !important;
         min-width: 40px !important;
         min-height: 40px !important;
     }
     
     .chatbot-send svg {
         display: block !important;
         visibility: visible !important;
         opacity: 1 !important;
         width: 18px !important;
         height: 18px !important;
     }
     
     .chatbot-close {
         width: 32px;
         height: 32px;
         min-width: 32px;
         min-height: 32px;
         font-size: 20px;
     }
 }
 
 /* Landscape orientation on mobile */
 @media (max-width: 768px) and (orientation: landscape) {
     #chatbot-window.chatbot-window {
         height: 100vh !important;
         max-height: 100vh !important;
         width: 100vw !important;
     }
     
     .chatbot-header {
         padding: 8px 12px !important;
         padding-top: calc(8px + env(safe-area-inset-top)) !important;
     }
     
     .chatbot-header h3 {
         font-size: 14px !important;
     }
     
     .chatbot-messages {
         padding: 10px !important;
     }
     
     .chatbot-input-container {
         padding: 8px !important;
         padding-bottom: calc(8px + env(safe-area-inset-bottom)) !important;
     }
 }
 
 /* Touch-friendly adjustments */
 @media (hover: none) and (pointer: coarse) {
     .chatbot-toggle {
         width: 56px;
         height: 56px;
         min-width: 56px;
         min-height: 56px;
     }
     
     .chatbot-icon-btn {
         min-width: 44px;
         min-height: 44px;
     }
     
     .chatbot-send {
         min-width: 44px;
         min-height: 44px;
     }
     
     .chatbot-input {
         font-size: 16px !important; /* Prevents zoom on iOS */
     }
     
     .chatbot-menu-item {
         min-height: 44px;
     }
     
     /* Remove hover effects on touch devices */
     .chatbot-toggle:hover {
         transform: none;
         box-shadow: var(--chatbot-shadow);
     }
     
     .chatbot-send:hover {
         transform: none;
         background-color: var(--chatbot-primary-color);
     }
     
     .chatbot-icon-btn:hover {
         background-color: transparent;
     }
     
     .chatbot-close:hover {
         background-color: transparent;
     }
 }
 
 /* Additional mobile fixes for WordPress compatibility */
 @media (max-width: 768px) {
     /* Ensure no WordPress admin bar interference */
     html.admin-bar #chatbot-widget.chatbot-widget,
     html.admin-bar #chatbot-window.chatbot-window {
         top: 0 !important;
         z-index: 9999999 !important; /* Above WordPress admin bar */
     }
     
     /* Ensure widget appears above WordPress sticky headers */
     #chatbot-widget.chatbot-widget {
         z-index: 9999999 !important;
     }
     
     #chatbot-window.chatbot-window {
         z-index: 9999999 !important;
     }
     
     #chatbot-toggle.chatbot-toggle {
         z-index: 9999999 !important;
     }
     
     /* Override any WordPress theme max-width constraints */
     #chatbot-widget * {
         max-width: none !important;
     }
     
     #chatbot-window.chatbot-window * {
         box-sizing: border-box !important;
     }
     
     /* Ensure proper stacking context */
     #chatbot-widget.chatbot-widget {
         isolation: isolate;
     }
     
     /* Prevent any transform or animation interference */
     #chatbot-window.chatbot-window {
         will-change: auto !important;
         transform: none !important;
         transition: none !important;
     }
     
     /* When open, ensure it's on top of everything */
     #chatbot-widget.chatbot-open {
         z-index: 9999999 !important;
     }
     
     #chatbot-widget.chatbot-open #chatbot-window.chatbot-window {
         z-index: 9999999 !important;
     }
 }
 
 /* Dark theme support (optional) */
 @media (prefers-color-scheme: dark) {
     :root {
         --chatbot-bg-color: #1a1a1a;
         --chatbot-text-color: #e0e0e0;
         --chatbot-border-color: #333333;
     }
     
     .chatbot-message-assistant .chatbot-message-content {
         background-color: #2a2a2a;
         color: var(--chatbot-text-color);
     }
     
     .chatbot-sources {
         background-color: #2a2a2a;
     }
     
     .chatbot-input {
         background-color: #2a2a2a;
         color: var(--chatbot-text-color);
         border-color: #333333;
     }
 }
 
 /* Thinking Indicator */
 .chatbot-thinking-indicator {
     display: flex;
     align-items: center;
     gap: 10px;
     padding: 16px;
     color: var(--chatbot-text-color, #6b7280);
     font-size: 14px;
 }
 
 .chatbot-thinking-dots {
     display: inline-flex;
     gap: 4px;
     align-items: center;
 }
 
 .chatbot-thinking-dots span {
     width: 6px;
     height: 6px;
     border-radius: 50%;
     background-color: var(--chatbot-text-color, #9ca3af);
     animation: chatbot-thinking-pulse 1.4s ease-in-out infinite;
 }
 
 .chatbot-thinking-dots span:nth-child(1) {
     animation-delay: 0s;
 }
 
 .chatbot-thinking-dots span:nth-child(2) {
     animation-delay: 0.2s;
 }
 
 .chatbot-thinking-dots span:nth-child(3) {
     animation-delay: 0.4s;
 }
 
 .chatbot-thinking-text {
     color: var(--chatbot-text-color, #6b7280);
     font-style: italic;
 }
 
 @keyframes chatbot-thinking-pulse {
     0%, 60%, 100% {
         opacity: 0.3;
         transform: scale(0.8);
     }
     30% {
         opacity: 1;
         transform: scale(1);
     }
 }


 /* Voice button styling - similar to send button */
 .chatbot-voice {
     position: absolute;
     left: 12px;
     bottom: 12px;
     width: 32px;
     height: 32px;
     border-radius: 8px;
     background-color: transparent;
     color: var(--chatbot-text-color);
     border: 1px solid var(--chatbot-border-color);
     cursor: pointer;
     display: flex;
     align-items: center;
     justify-content: center;
     transition: all 0.2s;
     flex-shrink: 0;
     padding: 0;
     z-index: 2;
 }

 .chatbot-voice:hover {
     background-color: var(--chatbot-gray-bg);
     border-color: var(--chatbot-border-color-light);
 }

 .chatbot-voice:active {
     transform: scale(0.95);
 }

 .chatbot-voice.recording {
     background-color: #ef4444;
     color: white;
     border-color: #ef4444;
     animation: pulse 1.5s ease-in-out infinite;
 }

 .chatbot-voice.recording:hover {
     background-color: #dc2626;
     border-color: #dc2626;
 }

 .chatbot-voice svg {
     width: 16px;
     height: 16px;
     display: block;
 }

 /* Adjust input padding to accommodate both buttons */
 .chatbot-input {
     padding: 16px 48px 16px 48px;
     /* Left padding for voice button, right padding for send button */
 }

 /* Pulse animation for recording state */
 @keyframes pulse {

     0%,
     100% {
         opacity: 1;
     }

     50% {
         opacity: 0.7;
     }
 }

 /* Mobile responsive adjustments */
 @media (max-width: 768px) {
     .chatbot-voice {
         width: 40px;
         height: 40px;
         left: 8px;
         bottom: 8px;
     }

     .chatbot-voice svg {
         width: 18px;
         height: 18px;
     }

         .chatbot-input {
             padding: 12px 44px 12px 52px !important;
             /* Left padding for voice button (40px button + 8px left + 4px spacing) */
             font-size: 16px !important;
             /* Prevents zoom on iOS */
         }
 }

 /* Fullscreen mode adjustments */
 .chatbot-window.chatbot-fullscreen .chatbot-voice {
     display: flex !important;
     visibility: visible !important;
     opacity: 1 !important;
     position: absolute !important;
     left: 12px !important;
     bottom: 12px !important;
     width: 32px !important;
     height: 32px !important;
     z-index: 2 !important;
 }
 